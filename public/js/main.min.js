function chatService(e){var a=firebase.database().ref().child("messages"),t={};return t.getMessages=function(){return e(a)},t.getMessagesToShow=function(){return e(a.limitToLast(15))},t.addMessage=function(e){t.getMessages().$add(e)},t}function chatCtrl(e,a){var t=this,s=a();t.messages=e.getMessages(),t.messagesToShow=e.getMessagesToShow(),t.addMessage=function(){if(null!=t.author)var a={authorId:t.author.uid,author:t.author.displayName,authorImg:t.author.photoURL,message:t.newMessage};else alert("Санала зарегистрируйтесь");""!=t.newMessage?(e.addMessage(a),t.newMessage=""):alert("Введите сообщение")},t.login=function(){s.$signInWithPopup("google")},t.logout=function(){s.$signOut()},s.$onAuthStateChanged(function(e){t.author=e})}function enterClicker(){return function(e,a,t){a.bind("keydown keypress",function(a){13===a.which&&(e.$apply(function(){e.$eval(t.enterClicker)}),a.preventDefault())})}}var config={apiKey:"AIzaSyBuwgK2-_dXDtL8g40GP-Xx9_N5PW4jK8g",authDomain:"cbschat-4d10f.firebaseapp.com",databaseURL:"https://cbschat-4d10f.firebaseio.com",storageBucket:"cbschat-4d10f.appspot.com",messagingSenderId:"595291995378"};firebase.initializeApp(config),angular.module("chatApp",["firebase"]),angular.module("chatApp").factory("chatService",["$firebaseArray",chatService]),angular.module("chatApp").controller("ChatCtrl",["chatService","$firebaseAuth",chatCtrl]),angular.module("chatApp").directive("enterClicker",[enterClicker]);